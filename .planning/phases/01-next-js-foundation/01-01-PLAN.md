---
phase: 01-next-js-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - next.config.mjs
  - app/layout.tsx
  - app/page.tsx
  - tailwind.config.js
  - postcss.config.mjs
autonomous: true
requirements:
  - MIG-01
  - MIG-03
  - MIG-04
  - INF-01

must_haves:
  truths:
    - "Developer can run npm run dev and Next.js starts without errors"
    - "Tailwind CSS is installed via npm package (not CDN)"
    - "Montserrat and Inter fonts are loaded via next/font/google"
    - "Next.js config file exists and configures SPA mode"
  artifacts:
    - path: "package.json"
      provides: "Next.js and Tailwind dependencies"
      contains: "next"
    - path: "next.config.mjs"
      provides: "Next.js configuration with SPA mode"
      contains: "output: 'export'"
    - path: "app/layout.tsx"
      provides: "Root layout with fonts and Tailwind import"
      min_lines: 20
    - path: "app/page.tsx"
      provides: "Root route placeholder"
      min_lines: 5
    - path: "tailwind.config.js"
      provides: "Tailwind configuration scanning app directory"
      contains: "./app/**/*.{js,ts,jsx,tsx,mdx}"
  key_links:
    - from: "app/layout.tsx"
      to: "next/font/google"
      via: "import statement"
      pattern: "from 'next/font/google'"
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "CSS import"
      pattern: "import.*globals.css"
    - from: "tailwind.config.js"
      to: "app directory"
      via: "content paths"
      pattern: "content:.*app"
---

<objective>
Scaffold a Next.js 16 App Router project with TypeScript, Tailwind CSS v3 (npm package), and Google Fonts (Montserrat + Inter) optimization. Configure as SPA with output: 'export' to preserve client-side behavior during migration.

Purpose: Establish Next.js infrastructure foundation. Replace Vite build system with Next.js, replace Tailwind CDN with npm package, replace Google Fonts CDN with next/font self-hosting.

Output: Working Next.js project that can run dev server and build successfully, with fonts and Tailwind configured.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-next-js-foundation/01-CONTEXT.md
@.planning/phases/01-next-js-foundation/01-RESEARCH.md

Current project uses:
- React 19.2.4 with Vite
- Tailwind CDN via script tag in index.html
- Google Fonts CDN via link tag
- Path aliases (@/) configured in vite.config.ts
- Port 3000 for dev server
</context>

<tasks>

<task type="auto">
  <name>Scaffold Next.js project with TypeScript and Tailwind</name>
  <files>
    package.json
    package-lock.json
    next.config.mjs
    tailwind.config.js
    postcss.config.mjs
    app/layout.tsx
    app/page.tsx
    app/globals.css
    tsconfig.json
    .gitignore
  </files>
  <action>
Use create-next-app to scaffold a fresh Next.js 16 project in a temporary directory, then transplant configuration files to current project:

1. Run `npx create-next-app@latest temp-next --typescript --tailwind --eslint --app --turbopack --import-alias "@/*" --no-git` in parent directory to generate template
2. Copy these files from temp-next/ to project root:
   - next.config.mjs (base config)
   - tailwind.config.js (content paths)
   - postcss.config.mjs (Tailwind processing)
   - tsconfig.json (overwrite with Next.js defaults)
   - .gitignore (merge with existing if present)
3. Copy temp-next/app/ directory structure to project root:
   - app/layout.tsx (root layout template)
   - app/page.tsx (root route template)
   - app/globals.css (Tailwind directives)
4. Update package.json:
   - Add Next.js scripts: "dev": "next dev", "build": "next build", "start": "next start", "lint": "next lint"
   - Keep existing dependencies: react, react-dom, lucide-react, html5-qrcode
   - Add Next.js and Tailwind: next@^16, tailwindcss@^3, postcss, autoprefixer, eslint-config-next
   - REMOVE Vite dependencies: @vitejs/plugin-react, vite
5. Run `npm install` to install new dependencies
6. Delete temp-next/ directory after copying files

DO NOT modify app/layout.tsx or app/page.tsx yet (next task handles fonts). Keep scaffolded templates.
  </action>
  <verify>
1. Run `ls app/` to confirm app/layout.tsx, app/page.tsx, app/globals.css exist
2. Run `cat package.json | grep -E '"(next|tailwindcss)"'` to verify Next.js and Tailwind v3 installed
3. Run `cat tsconfig.json | grep '"next"'` to verify Next.js TypeScript plugin present
4. Run `cat next.config.mjs` to see default config (should be minimal at this stage)
  </verify>
  <done>
Next.js project structure exists with app/ directory, package.json includes Next.js and Tailwind v3, tsconfig.json has Next.js plugin, Tailwind and PostCSS configs present.
  </done>
</task>

<task type="auto">
  <name>Configure Next.js for SPA mode and integrate Google Fonts</name>
  <files>
    next.config.mjs
    app/layout.tsx
  </files>
  <action>
1. Edit next.config.mjs:
   - Add `output: 'export'` to generate static SPA (preserves Vite-like behavior)
   - Result should be:
     ```js
     /** @type {import('next').NextConfig} */
     const nextConfig = {
       output: 'export',
     }
     export default nextConfig
     ```

2. Edit app/layout.tsx to import and configure Google Fonts:
   - Import Inter and Montserrat from 'next/font/google' at top
   - Configure Inter: `const inter = Inter({ subsets: ['latin'], variable: '--font-inter', display: 'swap' })`
   - Configure Montserrat: `const montserrat = Montserrat({ subsets: ['latin'], weight: ['400', '600', '700'], variable: '--font-montserrat', display: 'swap' })`
   - Apply font variables to `<html>` tag: `className={\`\${inter.variable} \${montserrat.variable}\`}`
   - Apply Inter to `<body>` tag: `className="font-inter"`
   - Import './globals.css' (if not already present)
   - Result structure:
     ```tsx
     import { Inter, Montserrat } from 'next/font/google'
     import './globals.css'

     const inter = Inter({ ... })
     const montserrat = Montserrat({ ... })

     export default function RootLayout({ children }: { children: React.ReactNode }) {
       return (
         <html lang="en" className={`${inter.variable} ${montserrat.variable}`}>
           <body className="font-inter">{children}</body>
         </html>
       )
     }
     ```

Per research: next/font/google self-hosts fonts at build time, eliminating network requests and preventing FOUT/FOIT. Using CSS variables (--font-inter, --font-montserrat) allows referencing in Tailwind config later.
  </action>
  <verify>
1. Run `cat next.config.mjs` and confirm "output: 'export'" is present
2. Run `cat app/layout.tsx` and confirm:
   - Import from 'next/font/google' present
   - Font variables applied to html className
   - font-inter applied to body className
   - globals.css imported
  </verify>
  <done>
next.config.mjs configures SPA mode with output: 'export'. app/layout.tsx imports and applies Inter and Montserrat fonts via next/font/google with CSS variables. Root layout imports globals.css.
  </done>
</task>

<task type="auto">
  <name>Configure Tailwind to recognize fonts and scan app directory</name>
  <files>
    tailwind.config.js
    app/globals.css
  </files>
  <action>
1. Edit tailwind.config.js:
   - Ensure content paths include: `'./app/**/*.{js,ts,jsx,tsx,mdx}'`
   - Extend theme with custom font families using CSS variables from next/font:
     ```js
     fontFamily: {
       inter: ['var(--font-inter)', 'sans-serif'],
       montserrat: ['var(--font-montserrat)', 'sans-serif'],
     }
     ```
   - Extend theme with custom colors from existing design:
     ```js
     colors: {
       'primary-orange': '#f97316',
       'primary-orange-light': '#fb923c',
     }
     ```
   - Final config should be:
     ```js
     /** @type {import('tailwindcss').Config} */
     module.exports = {
       content: [
         './app/**/*.{js,ts,jsx,tsx,mdx}',
       ],
       theme: {
         extend: {
           fontFamily: {
             inter: ['var(--font-inter)', 'sans-serif'],
             montserrat: ['var(--font-montserrat)', 'sans-serif'],
           },
           colors: {
             'primary-orange': '#f97316',
             'primary-orange-light': '#fb923c',
           },
         },
       },
       plugins: [],
     }
     ```

2. Verify app/globals.css contains Tailwind directives (should be auto-generated by create-next-app):
   - `@tailwind base;`
   - `@tailwind components;`
   - `@tailwind utilities;`
   - If missing, add them at the top

Per research: Tailwind v3 requires explicit content paths to scan for class names. Custom font utilities (font-inter, font-montserrat) will work via CSS variables. Custom colors will be available as Tailwind utilities (text-primary-orange, bg-primary-orange-light).
  </action>
  <verify>
1. Run `cat tailwind.config.js` and confirm:
   - content includes './app/**/*.{js,ts,jsx,tsx,mdx}'
   - fontFamily extend has inter and montserrat with CSS variables
   - colors extend has primary-orange and primary-orange-light
2. Run `cat app/globals.css | head -3` to confirm @tailwind directives present
  </verify>
  <done>
tailwind.config.js scans app directory for classes, extends theme with custom Inter/Montserrat fonts via CSS variables, and includes primary-orange colors. app/globals.css has @tailwind directives.
  </done>
</task>

</tasks>

<verification>
After all tasks complete, verify infrastructure:

1. **File structure check:**
   ```bash
   ls -la app/
   # Should show: layout.tsx, page.tsx, globals.css
   ```

2. **Package verification:**
   ```bash
   npm list next tailwindcss react
   # Should show: next@^16.x, tailwindcss@^3.x, react@^19.x
   ```

3. **Configuration verification:**
   ```bash
   cat next.config.mjs
   # Should contain: output: 'export'

   cat app/layout.tsx | grep -E '(next/font|globals.css)'
   # Should show: import from next/font/google and import ./globals.css

   cat tailwind.config.js | grep -E '(app/\*\*|fontFamily|primary-orange)'
   # Should show: app directory in content, fontFamily with CSS vars, custom colors
   ```

4. **TypeScript check:**
   ```bash
   cat tsconfig.json | grep '"next"'
   # Should show: "plugins": [{ "name": "next" }]
   ```

DO NOT attempt to start dev server yet (Phase 1 Plan 02 will configure path aliases first, Plan 03 will verify dev server).
</verification>

<success_criteria>
1. Next.js 16 project scaffolded with App Router structure (app/ directory exists)
2. package.json includes next@^16, tailwindcss@^3, react@^19 (Vite removed)
3. next.config.mjs configures SPA mode with output: 'export'
4. app/layout.tsx imports and applies Inter + Montserrat fonts via next/font/google
5. tailwind.config.js scans app directory and extends theme with custom fonts and colors
6. app/globals.css contains @tailwind directives
7. tsconfig.json includes Next.js TypeScript plugin
8. All files committed to git
</success_criteria>

<output>
After completion, create `.planning/phases/01-next-js-foundation/01-01-SUMMARY.md` following the standard SUMMARY template.
</output>
